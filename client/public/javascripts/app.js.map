{"version":3,"file":"public/javascripts/app.js","sources":["app/application.coffee","app/collections/bank_accesses.coffee","app/collections/bank_accounts.coffee","app/collections/bank_operations.coffee","app/collections/banks.coffee","app/initialize.coffee","app/lib/app_helpers.coffee","app/lib/base_view.coffee","app/lib/view_collection.coffee","app/locale/en.coffee","app/models/bank.coffee","app/models/bank_access.coffee","app/models/bank_account.coffee","app/models/bank_operation.coffee","app/router.coffee","app/views/accounts.coffee","app/views/accounts_bank.coffee","app/views/accounts_bank_account.coffee","app/views/app.coffee","app/views/balance.coffee","app/views/balance_banks.coffee","app/views/balance_operations.coffee","app/views/bank_subtitle.coffee","app/views/bank_title.coffee","app/views/mockup.coffee","app/views/navbar.coffee","app/views/new_bank.coffee","app/views/templates/accounts.jade","app/views/templates/accounts_bank.jade","app/views/templates/accounts_bank_account.jade","app/views/templates/app.jade","app/views/templates/balance.jade","app/views/templates/balance_bank_subtitle.jade","app/views/templates/balance_bank_title.jade","app/views/templates/balance_banks_empty.jade","app/views/templates/balance_operations_element.jade","app/views/templates/balance_operations_empty.jade","app/views/templates/balance_operations_header.jade","app/views/templates/mockup_accounts.jade","app/views/templates/mockup_balance.jade","app/views/templates/navbar.jade","app/views/templates/new_bank.jade"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhCA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtCA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtCA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3CA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1GA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjCA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvDA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvCA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3FA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3DA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvDA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1EA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtDA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1DA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxCA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvBA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzBA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9CA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApEA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA","sourcesContent":["module.exports =\n\n    initialize: ->\n\n        # Routing management\n        Router = require 'router'\n        @router = new Router()\n        Backbone.history.start()\n\n        # Makes this object immuable.\n        Object.freeze this if typeof Object.freeze is 'function'\n","BankAccess = require '../models/bank_access'\n\nmodule.exports = class BankAccesses extends Backbone.Collection\n\n\tmodel: BankAccess\n\turl: \"bankaccesses\"\n","BankAccount = require '../models/bank_account'\n\nmodule.exports = class BankAccounts extends Backbone.Collection\n\n\tmodel: BankAccount\n\turl: \"bankaccounts\"\n","BankOperation = require '../models/bank_operation'\n\nmodule.exports = class BankOperations extends Backbone.Collection\n\n\tmodel: BankOperation\n\turl: \"bankoperations\"\n","Bank = require '../models/bank'\n\nmodule.exports = class Banks extends Backbone.Collection\n\n    model: Bank\n    url: \"banks\"\n\n    getSum: ->\n        sum = 0\n        for bank in window.collections.banks.models\n            sum += Number bank.get(\"amount\")\n        Number(sum)\n","app = require 'application'\nAppView = require 'views/app'\n\nBanksCollection = require 'collections/banks'\nBankOperationsCollection = require 'collections/bank_operations'\n\n# The function called from index.html\n$ ->\n    require 'lib/app_helpers'\n\n    ###\n            global variables\n    ###\n\n    # app, for nasty tricks\n    window.app = app\n\n    # internationalisation\n    window.polyglot = new Polyglot \n        \"phrases\": require 'locale/en'\n    window.i18n = (key) -> window.polyglot.t key\n\n    # collections, views\n    window.collections = {}\n    window.views = {}\n\n    # banks, operations\n    window.collections.banks = new BanksCollection()\n    window.collections.operations = new BankOperationsCollection()\n\n\n    ###\n            views\n    ###\n\n    # this one is tricky - it lays down the structure, so it needs to be rendered\n    # before any other view using that structure\n    window.views.appView = new AppView()\n    window.views.appView.render()\n\n    $('.nice-scroll').niceScroll()\n\n\n    window.activeObjects = {}\n    _.extend(window.activeObjects, Backbone.Events);\n\n    # init\n    app.initialize()\n","(() ->\n    # IIFE to avoid collisions with other variables\n    (->\n        # Make it safe to do console.log() always.\n        console = window.console = window.console or {}\n        method = undefined\n        dummy = ->\n        methods = ('assert,count,debug,dir,dirxml,error,exception,\n                   group,groupCollapsed,groupEnd,info,log,markTimeline,\n                   profile,profileEnd,time,timeEnd,trace,warn').split ','\n\n        console[method] = console[method] or dummy while method = methods.pop()\n    )()\n)()\n\nNumber::formatMoney = (decPlaces, thouSeparator, decSeparator) ->\n    n = this\n    decPlaces = (if isNaN(decPlaces = Math.abs(decPlaces)) then 2 else decPlaces)\n    decSeparator = (if decSeparator is `undefined` then \".\" else decSeparator)\n    thouSeparator = (if thouSeparator is `undefined` then \",\" else thouSeparator)\n    sign = (if n < 0 then \"-\" else \"\")\n    i = parseInt(n = Math.abs(+n or 0).toFixed(decPlaces)) + \"\"\n    j = (if (j = i.length) > 3 then j % 3 else 0)\n    sign + ((if j then i.substr(0, j) + thouSeparator else \"\")) + i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + thouSeparator) + ((if decPlaces then decSeparator + Math.abs(n - i).toFixed(decPlaces).slice(2) else \"\"))\n\nNumber::money = ->\n    @formatMoney(2, \" \", \",\")\n\nDate::dateString = ->\n    myDate = @\n    (myDate.getDate() + 1) + \"/\" + myDate.getMonth() + \"/\" + myDate.getFullYear()\n","module.exports = class BaseView extends Backbone.View\n\n    template: ->\n\n    initialize: ->\n\n    getRenderData: ->\n        model: @model\n\n    render: ->\n        @beforeRender()\n        @$el.html @template(@getRenderData())\n        @afterRender()\n        @\n\n    beforeRender: ->\n\n    afterRender: ->\n\n    destroy: ->\n        @undelegateEvents()\n        @$el.removeData().unbind()\n        @remove()\n        Backbone.View::remove.call @\n","BaseView = require 'lib/base_view'\n\n# View that display a collection of subitems\n# used to DRY views\n# Usage : new ViewCollection(collection:collection)\n# Automatically populate itself by creating a itemView for each item\n# in its collection\n\n# can use a template that will be displayed alongside the itemViews\n\n# itemView       : the Backbone.View to be used for items\n# itemViewOptions : the options that will be passed to itemViews\n# collectionEl : the DOM element's selector where the itemViews will\n#                be displayed. Automatically falls back to el if null\n\nmodule.exports = class ViewCollection extends BaseView\n\n    itemview: null\n\n    views: {}\n\n    template: -> ''\n\n    itemViewOptions: ->\n\n    collectionEl: null\n\n    # add 'empty' class to view when there is no subview\n    onChange: ->\n        @$el.toggleClass 'empty', _.size(@views) is 0\n\n    # can be overriden if we want to place the subviews somewhere else\n    appendView: (view) ->\n        @$collectionEl.append view.el\n\n    # bind listeners to the collection\n    initialize: ->\n        super\n        @views = {}\n        @listenTo @collection, \"reset\",   @onReset\n        @listenTo @collection, \"add\",     @addItem\n        @listenTo @collection, \"remove\",  @removeItem\n\n        if not @collectionEl?\n            collectionEl = el\n\n    # if we have views before a render call, we detach them\n    render: ->\n        view.$el.detach() for id, view of @views\n        super\n\n    # after render, we reattach the views\n    afterRender: ->\n        @$collectionEl = $(@collectionEl)\n        @appendView view.$el for id, view of @views\n        @onReset @collection\n        @onChange @views\n\n    # destroy all sub views before remove\n    remove: ->\n        @onReset []\n        super\n\n    # event listener for reset\n    onReset: (newcollection) ->\n        view.remove() for id, view of @views\n        newcollection.forEach @addItem\n\n    # event listeners for add\n    addItem: (model) =>\n        options = _.extend {}, {model: model}, @itemViewOptions(model)\n        view = new @itemview(options)\n        @views[model.cid] = view.render()\n        @appendView view\n        @onChange @views\n\n    # event listeners for remove\n    removeItem: (model) =>\n        @views[model.cid].remove()\n        delete @views[model.cid]\n\n        @onChange @views","module.exports = \n\t#\n\t# Menu - topbar\n\t#\n    \"menu_accounts\" : \"Accounts\"\n    \"menu_balance\" : \"Balance\"\n    \"menu_add_bank\": \"Add a new bank access\"\n    \"overall_balance\": \"overall balance:\"\n\n    #\n    # Add a new bank dialog\n    #\n    \"add_bank_bank\" : \"Bank\"\n    \"add_bank_credentials\" : \"Credentials\"\n    \"add_bank_login\" : \"Login\"\n    \"add_bank_login_placeholder\" : \"enter login here\"\n    \"add_bank_password\" : \"Password\"\n    \"add_bank_password_placeholder\" : \"enter password here\"\n    \"add_bank_security_notice\" : \"Security notice\"\n    # the actual text of the security notice\n    \"add_bank_security_notice_text\" : \"In order to protect our customers, we implemented the best solutions...\"\n    # buttons\n    \"add_bank_cancel\" : \"cancel\"\n    \"add_bank_ok\" : \"Verify & Save\"\n\n    #\n    # Accounts\n    #\n    \"accounts_delete_bank\" : \"remove this bank from Cozy\"\n    \"accounts_delete_bank_title\" : \"Confirmation requires\"\n    \"accounts_delete_bank_prompt\" : \"Are you sure ? This can't be undone, and will erase ALL your data from this bank.\"\n    \"accounts_delete_account\" : \"remove this account permanently\"\n    \"accounts_delete_account_title\" : \"Confirmation required\"\n    \"accounts_delete_account_prompt\" : \"Are you sure ? This can't be undone, and will erase ALL your data from this account.\"\n\n    #\n    # Misc\n    #\n    \"loading\" : \"loading...\"\n    \"verifying\" : \"verifying...\"\n    \"removing\" : \"removing...\"\n    \"error\" : \"error...\"\n    \"sent\" : \"sent successfully...\"\n    \"error_refresh\" : \"Sorry, there was an error. Please refresh and try again.\"\n\n    #\n    # Alerts\n    #\n    \"alert_sure_delete_bank\" : \"Are you sure ? This will remove all of your data from this bank, and can't be undone.\"\n    \"alert_sure_delete_account\" : \"Are you sure ? This will remove all of your data from this account, and can't be undone.\"\n    \"error_loading_accounts\" : \"There was an error loading bank accounts. Please refresh and try again later.\"\n\n    #\n    # Balance\n    #\n    \"balance_please_choose_account\" : \"Please select an account on the left to display its operations\"\n    \"balance_banks_empty\" : \"There are currently no banks accounts saved. Go ahead and create the first one now !\"\n","module.exports = class Bank extends Backbone.Model\n\tdefaults:\n\t\tamount: 0\n","module.exports = class BankAccess extends Backbone.Model\n\n\turl: \"bankaccesses\"\n","module.exports = class BankAccount extends Backbone.Model\n","module.exports = class BankOperation extends Backbone.Model\n","MockupView = require 'views/mockup'\nAppView = require 'views/app'\nBalanceView = require 'views/balance'\n\nmodule.exports = class Router extends Backbone.Router\n\n    routes:\n        '': 'balance'\n        'accounts': 'accounts'\n        'mockup' : 'mockup'\n        'mockup2' : 'mockup2'\n\n    balance: ->\n        window.views.balanceView?.render()\n\n    accounts: ->\n        if window.views.accountsView\n            window.views.accountsView?.render()\n        else\n            @navigate \"/\"\n\n    mockup: ->\n        mainView = new MockupView()\n        mainView.render()\n\n    mockup2: ->\n        accountsView = new MockupView()\n        accountsView.template = require('./views/templates/mockup_accounts')\n        accountsView.render()\n","BaseView = require '../lib/base_view'\nAccountsBankView = require './accounts_bank'\n\nmodule.exports = class AccountsView extends BaseView\n\n    template: require('./templates/accounts')\n\n    el: 'div#content'\n    elBanks: '.content-right-column'\n\n    render: =>\n\n        # load the template\n        super()\n\n        # prepare the banks list\n        for bank in window.collections.banks.models\n            view = new AccountsBankView bank\n            @$(@elBanks).append view.render().el\n        \n        # TODO - fix the compability issue with niceScroll\n        #@$('#balance-column-right').niceScroll()\n        @\n","BaseView = require '../lib/base_view'\nBankAccountsCollection = require '../collections/bank_accounts'\nAccountsBankAccountView = require './accounts_bank_account'\n\nmodule.exports = class AccountsBanksView extends BaseView\n\n    template: require('./templates/accounts_bank')\n\n    className: 'bank-group'\n\n    inUse: false\n\n    events:\n        \"click a.delete-bank\" : \"deleteBank\" \n\n    constructor: (@model) ->\n        super()\n\n    initialize: ->\n        @accounts = new BankAccountsCollection()\n        @accounts.url = \"banks/getAccounts/\" + @model.get(\"id\")\n\n    deleteBank: (event) ->\n        event.preventDefault()\n\n        view = @\n\n        button = $ event.target\n\n        if not @inUse and confirm window.i18n(\"alert_sure_delete_bank\")\n\n            @inUse = true\n            oldText = button.html()\n            button.addClass \"disabled\"\n            button.html window.i18n(\"removing\") + \" <img src='./loader_red.gif' />\"\n\n            $.ajax\n                url: url = \"banks/\" + @model.get(\"id\")\n                type: \"DELETE\"\n                success: (model) ->\n                    console.log \"destroyed\"\n                    view.destroy()\n                error: (err) ->\n                    console.log \"there was an error\"\n                    console.log err\n                    inUse = false\n\n    render: ->\n\n        view = @\n        viewEl = @$el\n        \n        # get all accounts in this bank\n        @accounts.fetch\n\n            success: (accounts) ->\n                \n                # add the bank header\n                view.$el.html view.template\n                    model: view.model\n\n                # add views for accounts, and store them in the table\n                for account in accounts.models\n                    accountView = new AccountsBankAccountView account\n                    view.$(\"tbody#account-container\").append accountView.render().el\n                    console.log view.$(\"tbody#account-container\")\n\n                # hide the bank if there are no accounts\n                if accounts.length == 0\n                    view.$el.html \"\"\n\n            error: () ->\n\n                alert window.i18n(\"error_loading_accounts\")\n        @\n","BaseView = require '../lib/base_view'\n\nmodule.exports = class AccountsBankAccountView extends BaseView\n\n    template: require('./templates/accounts_bank_account')\n\n    tagName: \"tr\"\n\n    events:\n        \"click a.delete-account\" : \"deleteAccount\" \n\n    constructor: (@model) ->\n        super()\n\n    deleteAccount: (event) ->\n        event.preventDefault()\n\n        view = @\n\n        button = $ event.target\n\n        if not @inUse and confirm window.i18n(\"alert_sure_delete_account\")\n\n            @inUse = true\n            oldText = button.html()\n            button.addClass \"disabled\"\n            button.html window.i18n(\"removing\") + \" <img src='./loader_yellow.gif' />\"\n\n            @model.url = \"bankaccounts/\" + @model.get(\"id\")\n            @model.destroy\n                success: (model) ->\n                    console.log \"destroyed\"\n                    window.collections.banks.trigger \"account_removed\"\n                    view.destroy()\n                error: (err) ->\n                    console.log \"there was an error\"\n                    console.log err\n                    inUse = false\n\n    render: () ->\n        @$el.html @template\n            model: @model\n        @","BaseView = require '../lib/base_view'\n\nNavbarView = require 'views/navbar'\nNewBankView = require 'views/new_bank'\n\n\nAccountsView = require 'views/accounts'\nBalanceView = require 'views/balance'\n\n\nmodule.exports = class AppView extends BaseView\n\n    template: require('./templates/app')\n\n    el: 'body.application'\n\n    afterRender: ->\n        \n        # init - get the necessary data\n        window.collections.banks.fetch\n        \n            success: ->\n                if not @navbarView\n                    @navbarView = new NavbarView()\n                if not @newbankView\n                    @newbankView = new NewBankView()\n                if not window.views.balanceView\n                    window.views.balanceView = new BalanceView()\n                if not window.views.accountsView\n                    window.views.accountsView = new AccountsView()\n\n                @navbarView.render()\n                @newbankView.render()\n\n                # route visible by default\n                window.views.balanceView.render()\n            error: ->\n\n                # could not get banks, or 0 banks available - fatal error\n                console.log \"Fatal error: could not get the banks list\"\n                alert \"Something went wrong. Refresh.\"\n\n","BaseView = require '../lib/base_view'\n\nBalanceBanksView = require './balance_banks'\nBalanceOperationsView = require \"./balance_operations\"\n\nBankAccountsCollection = require '../collections/bank_accounts'\n\nmodule.exports = class BalanceView extends BaseView\n\n    template: require('./templates/balance')\n\n    el: 'div#content'\n\n    elAccounts: '#balance-column-left'\n    elOperations: '#balance-column-right'\n\n    initialize: ->\n        #@listenTo window.collections.banks, 'add', @renderBank\n        @listenTo window.activeObjects, \"new_access_added_successfully\", @render\n\n    render: =>\n        super()\n\n        # prepare the operations list\n        @operations = new BalanceOperationsView @$ @elOperations\n        @operations.render()\n\n        # prepare the banks list\n        view = @\n\n        treatment = (bank, callback) ->\n            viewBank = new BalanceBanksView bank\n            viewBank.accounts = new BankAccountsCollection()\n            viewBank.accounts.url = \"banks/getAccounts/\" + bank.get(\"id\")\n            viewBank.$el.html \"<p class='loading'>\" + window.i18n(\"loading\") + \" <img src='./loader.gif' /></p>\"\n            $(view.elAccounts).append viewBank.el\n            viewBank.accounts.fetch\n                success: (col) ->\n                    # return the number of accounts\n                    callback null, col.length\n                    viewBank.render()\n                error: (col, err, opts) ->\n                    console.log col\n                    callback null, col.length\n                    viewBank.$el.html \"\"\n\n        async.concat window.collections.banks.models, treatment, (err, results) ->\n            \n            if err\n                console.log err\n                alert window.i18n \"error_loading_accounts\"\n            \n            # no accounts\n            if results.length == 0\n                $(view.elAccounts).html require \"./templates/balance_banks_empty\"\n        @\n","BaseView = require '../lib/base_view'\nBankTitleView = require './bank_title'\nBankSubTitleView = require './bank_subtitle'\n\nmodule.exports = class BalanceBanksView extends BaseView\n\n    templateSub: require('./templates/balance_bank_subtitle')\n\n    className: 'bank'\n\n    constructor: (@model) ->\n        super()\n\n    initialize: ->\n        @listenTo window.activeObjects, \"new_access_added_successfully\", @checkIfRenderNeccessary\n\n    checkIfRenderNeccessary: (model) ->\n        if @model.get(\"id\") == model.get(\"bank\")\n            @render\n\n    render: ->\n\n        view = @\n        view.$el.html \"\"\n\n        if view.accounts.length > 0\n\n            # update the sum of accounts\n            sum = 0\n            view.accounts.each (account) ->\n                # calculate the sum\n                sum = sum + Number(account.get(\"amount\"))\n\n                # add the account\n                viewAccount = new BankSubTitleView account\n                view.$el.append viewAccount.render().el\n            \n            view.model.set(\"amount\", sum)\n            #console.log view.model\n\n            # render the bank title\n            viewTitle = new BankTitleView view.model\n            view.$el.prepend viewTitle.render().el\n        @\n","BaseView = require '../lib/base_view'\nBalanceBanksView = require './balance_banks'\nBankOperationsCollection = require \"../collections/bank_operations\"\n\nmodule.exports = class BalanceOperationsView extends BaseView\n\n    templateHeader: require './templates/balance_operations_header'\n    templateElement: require './templates/balance_operations_element'\n\n    constructor: (@el) ->\n        super()\n\n    initialize: ->\n        @operations = new BankOperationsCollection\n        @listenTo window.activeObjects, 'changeActiveAccount', @reload\n\n    render: ->\n        @$el.html require \"./templates/balance_operations_empty\"\n        @\n\n    reload: (account) =>\n        \n        view = @\n        @account = account\n        @operations.url = \"bankaccounts/getOperations/\" + @account.get(\"id\")\n\n        @$el.html @templateHeader\n            model: @account\n\n        # get the operations for this account\n        @operations.fetch\n            success: (operations) ->\n\n                view.$(\"#table-operations\").html \"\"\n\n                operations.each (operation) ->\n\n                    # add the operation to the table\n                    view.$(\"#table-operations\").append view.templateElement\n                        model: operation\n        @\n","BaseView = require '../lib/base_view'\n\nmodule.exports = class BankSubTitleView extends BaseView\n\n    template: require('./templates/balance_bank_subtitle')\n\n    constructor: (@model) ->\n        super()\n\n    events:\n    \t\"click .row\" : \"chooseAccount\"\n\n    initialize: ->\n        @listenTo @model, 'change', @render\n        @listenTo window.activeObjects, 'changeActiveAccount', @checkActive\n\n    chooseAccount: (event) ->\n    \tconsole.log \"Account chosen: \" + @model.get(\"title\")\n    \twindow.activeObjects.trigger \"changeActiveAccount\", @model\n\n    checkActive: (account) ->\n    \t@$(\".row\").removeClass(\"active\")\n    \tif account == @model\n    \t\t@$(\".row\").addClass(\"active\")\n","BaseView = require '../lib/base_view'\n\nmodule.exports = class BankTitleView extends BaseView\n\n    template: require('./templates/balance_bank_title')\n\n    constructor: (@model) ->\n        super()\n\n    initialize: ->\n        @listenTo @model, 'change', @render\n","BaseView = require '../lib/base_view'\n\n\nmodule.exports = class AppView extends BaseView\n\n    template: require('./templates/mockup_balance')\n\n    el: 'body.application'\n\n    afterRender: ->\n    \t$('.content-right-column').niceScroll()\n","BaseView = require '../lib/base_view'\n\n\nmodule.exports = class NavbarView extends BaseView\n\n    template: require('./templates/navbar')\n\n    el: 'div#navbar'\n\n    events:\n        \"click .menu-position\" : \"chooseMenuPosition\"\n\n    initialize: ->\n        @listenTo window.activeObjects, 'changeActiveMenuPosition', @checkActive\n        @listenTo window.collections.banks, 'change', @refreshOverallBalance\n        @listenTo window.collections.banks, 'destroy', @refreshOverallBalance\n\n    refreshOverallBalance: ->\n        sum = window.collections.banks.getSum()\n        #console.log \"recalculating the balance: \" + sum\n        $(\"span#total-amount\").html sum.money()\n\n    chooseMenuPosition: (event) ->\n        window.activeObjects.trigger \"changeActiveMenuPosition\", event.target\n\n    checkActive: (him) ->\n        @$(\".menu-position\").removeClass(\"active\")\n        $(him).parent().addClass(\"active\")\n","BaseView = require '../lib/base_view'\nBankAccessModel = require '../models/bank_access'\n\nmodule.exports = class NewBankView extends BaseView\n\n    template: require('./templates/new_bank')\n\n    el: 'div#add-bank-window'\n\n    events:\n        'click #btn-add-bank-save' : \"saveBank\"\n\n    saveBank: (event) ->\n        event.preventDefault()\n\n        view = @\n\n        button = $ event.target\n        console.log button\n\n        oldText = button.html()\n        button.addClass \"disabled\"\n        button.html window.i18n(\"verifying\") + \"<img src='./loader_green.gif' />\"\n\n        data =\n            login: $(\"#inputLogin\").val()\n            pass: $(\"#inputPass\").val()\n            bank: $(\"#inputBank\").val()\n\n        bankAccess = new BankAccessModel data\n\n        bankAccess.save data,\n            success: (model, response, options) ->\n\n                button.html window.i18n(\"sent\") + \" <img src='./loader_green.gif' />\"\n\n                hide = () ->\n                    $(\"#add-bank-window\").modal(\"hide\")\n                    button.removeClass \"disabled\"\n                    button.html oldText\n                \n                setTimeout hide, 500\n                \n                window.activeObjects.trigger \"new_access_added_successfully\", model\n                \n            error: (model, xhr, options) ->\n                console.log \"Error :\" + xhr\n\n                button.html window.i18n(\"error\")\n\n                alert window.i18n(\"error_refresh\")\n\n    getRenderData: ->\n        banks: window.collections.banks.models\n",".row.content-background\n\t.col-lg-12.content-right-column","h2 #{model.get(\"name\")}\n\ta.btn.btn-danger.pull-right.delete-bank\n\t\t| #{window.i18n(\"accounts_delete_bank\")}\ntable.table-accounts.table.table-striped.table-hover.table-bordered\n\ttbody#account-container\n","td.account-title #{model.get(\"title\")}\ntd.operation-amount\n\tspan.pull-right\n\ta.btn.btn-small.btn-warning.pull-right.delete-account\n\t\t| #{window.i18n(\"accounts_delete_account\")}","// navigation bar\n#navbar.navbar.navbar-fixed-top.navbar-inverse\n\n// modal window to add a new bank\n#add-bank-window.modal\n\n// content\n#content.container\n",".row.content-background\n    #balance-column-left.col-lg-4.content-left-column\n\n    #balance-column-right.col-lg-8.content-right-column\n",".row.accounts-sub\n    .col-lg-7\n        p.pull-left #{model.get('title')}\n    .col-lg-5\n        p.pull-right #{Number(model.get('amount')).money()} \n            span.euro-sign &euro;\n",".row.accounts-top\n    .col-lg-7\n        p.pull-left #{model.get('name')}\n    .col-lg-5\n        p.pull-right #{Number(model.get('amount')).money()} \n            span.euro-sign &euro;\n","p.arrow.text-right\n    img(src=\"images/arrow_vertical.png\")\np.loading\n    | #{window.i18n(\"balance_banks_empty\")}\n","if (model.get(\"amount\") > 0)\n    tr.success\n        td.operation-date #{new Date(model.get('date')).dateString()}\n        td.operation-title #{model.get('title')}\n        td.operation-amount\n            span.pull-right #{Number(model.get('amount')).money()}\nelse\n    tr\n        td.operation-date #{new Date(model.get('date')).dateString()}\n        td.operation-title #{model.get('title')}\n        td.operation-amount\n            span.pull-right #{Number(model.get('amount')).money()}\n","br\nbr\np.loading\n   | #{window.i18n(\"balance_please_choose_account\")}","h2 #{model.get(\"title\")}\n\ntable.table.table-striped.table-hover\n    tbody#table-operations\n        tr\n            td\n                p.loading\n                    img(src='./loader.gif')\n","// navigation bar\n.navbar.navbar-fixed-top.navbar-inverse\n  .container\n    button.navbar-toggle(type='button', data-toggle='collapse', data-target='.nav-collapse')\n      span.icon-bar\n      span.icon-bar\n      span.icon-bar\n    span.navbar-brand Cozy PFM\n    .nav-collapse.collapse\n      ul.nav.navbar-nav\n        li\n          a#menu-pos-balance(href='#') #{window.i18n(\"menu_balance\")}\n        li.active\n          a#menu-pos-accounts(href='#accounts') #{window.i18n(\"menu_accounts\")}\n        li\n          a#menu-pos-new-bank(data-toggle='modal', href='#add-bank-window') #{window.i18n(\"menu_add_bank\")}\n\n      ul.nav.navbar-nav.pull-right\n        p.navbar-text\n          | #{window.i18n(\"overall_balance\")} \n          span#total-amount +12967.72\n\n// modal window to add a new bank\n#add-bank-window.modal\n  .modal-dialog\n    .modal-content\n      .modal-header\n        button.close(type='button', data-dismiss='modal', aria-hidden='true') x\n        h4.modal-title\n          | #{window.i18n(\"menu_add_bank\")}\n      .modal-body\n        form\n          fieldset\n            legend\n              | #{window.i18n(\"add_bank_bank\")}\n            .form-group\n              select.form-control\n                option Le Crédit Lyonnais\n                option Société Générale\n          fieldset\n            legend\n              | #{window.i18n(\"add_bank_credentials\")}\n            .form-group\n              label(for='inputLogin')\n                | #{window.i18n(\"add_bank_login\")}\n              input#inputLogin.form-control(type='text', placeholder=window.i18n(\"add_bank_login_placeholder\"))\n            .form-group\n              label(for='inputPass')\n                | #{window.i18n(\"add_bank_password\")}\n              input#inputPass.form-control(type='password', placeholder=window.i18n(\"add_bank_password_placeholder\"))\n        h3.important-notice \n          | #{window.i18n(\"add_bank_security_notice\")}\n        p \n          | #{window.i18n(\"add_bank_security_notice_text\")}\n      .modal-footer\n        a.btn.btn-link(data-dismiss='modal',href='#') #{window.i18n(\"add_bank_cancel\")}\n        a.btn.btn-success(href='#') #{window.i18n(\"add_bank_ok\")}\n\n// content\n#content.container\n  .row.content-background\n    .col-lg-12.content-right-column\n      .group-bank\n        h2 Le Crédit Lyonnais\n          a.btn.btn-danger.pull-right \n            | #{window.i18n(\"accounts_delete_bank\")}\n        table.table-accounts.table.table-striped.table-hover.table-bordered\n          tbody\n            tr\n              td.account-title Compte bancaire\n              td.operation-amount\n                span.pull-right\n                  a.btn.btn-small.btn-warning.pull-right\n                    | #{window.i18n(\"accounts_delete_account\")}\n      .group-bank\n        h2 Société Générale\n          a.btn.btn-danger.pull-right\n            | #{window.i18n(\"accounts_delete_bank\")}\n        table.table-accounts.table.table-striped.table-hover.table-bordered\n          tbody\n            tr\n              td.account-title Compte bancaire 1\n              td.operation-amount\n                span.pull-right\n                  a.btn.btn-small.btn-warning.pull-right\n                    | #{window.i18n(\"accounts_delete_account\")}\n            tr\n              td.account-title Compte bancaire 2\n              td.operation-amount\n                span.pull-right\n                  a.btn.btn-small.btn-warning.pull-right\n                    | #{window.i18n(\"accounts_delete_account\")}\n",".navbar.navbar-fixed-top.navbar-inverse\n  .container\n    button.navbar-toggle(type='button', data-toggle='collapse', data-target='.nav-collapse')\n      span.icon-bar\n      span.icon-bar\n      span.icon-bar\n    span.navbar-brand Cozy PFM\n    .nav-collapse.collapse\n      ul.nav.navbar-nav\n        li.active\n          a#menu-pos-balance(href='#') Balance\n        li\n          a#menu-pos-accounts(href='#accounts') Accounts\n        li\n          a#menu-pos-new-bank(data-toggle='modal', href='#add-bank-window') Add a new bank\n\n      ul.nav.navbar-nav.pull-right\n        p.navbar-text\n          | overall balance \n          span#total-amount +12967.72\n\n#content.container\n  .row.content-background\n    .col-lg-4.content-left-column\n\n      .row.accounts-top\n        .col-lg-8\n          p.pull-left Le Crédit Lyonnais\n        .col-lg-4\n          p.pull-right +12942.23 \n            span.euro-sign &euro;\n      .row.accounts-sub\n        .col-lg-8\n          p.pull-left Compte bancaire\n        .col-lg-4\n          p.pull-right +12942.23 \n            span.euro-sign &euro;\n\n      .row.accounts-top.active\n        .col-lg-8\n          p.pull-left Société Générale\n        .col-lg-4\n          p.pull-right +25.49 \n            span.euro-sign &euro;\n      .row.accounts-sub\n        .col-lg-8\n          p.pull-left Compte bancaire 1\n        .col-lg-4\n          p.pull-right +26.49 \n            span.euro-sign &euro;\n      .row.accounts-sub\n        .col-lg-8\n          p.pull-left Compte bancaire 2\n        .col-lg-4\n          p.pull-right -1.00 \n            span.euro-sign &euro;\n\n\n\n    .col-lg-8.content-right-column\n      h2 Société Générale\n\n      table#table-operations.table.table-striped.table-hover\n        tbody\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title Ferrari Paris\n            td.operation-amount\n              span.pull-right -490550.00\n          tr.success\n            td.operation-date 17/07/2013\n            td.operation-title CB Tesco\n            td.operation-amount\n              span.pull-right.positive-balance +123.30\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title CB Intermarché\n            td.operation-amount\n              span.pull-right -12.90\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title Ferrari Paris\n            td.operation-amount\n              span.pull-right -490550.00\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title CB Apple\n            td.operation-amount\n              span.pull-right - 1899.00\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title CB Intermarché\n            td.operation-amount\n              span.pull-right -1.23\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title CB Intermarché\n            td.operation-amount\n              span.pull-right -25.39\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title CB Intermarché\n            td.operation-amount\n              span.pull-right -0.12\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title Ferrari Paris\n            td.operation-amount\n              span.pull-right -490550.00\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title CB Apple\n            td.operation-amount\n              span.pull-right - 1899.00\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title CB Intermarché\n            td.operation-amount\n              span.pull-right -1.23\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title CB Intermarché\n            td.operation-amount\n              span.pull-right -25.39\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title CB Intermarché\n            td.operation-amount\n              span.pull-right -0.12\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title CB Apple\n            td.operation-amount\n              span.pull-right - 1899.00\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title CB Intermarché\n            td.operation-amount\n              span.pull-right -1.23\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title CB Intermarché\n            td.operation-amount\n              span.pull-right -25.39\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title CB Intermarché\n            td.operation-amount\n              span.pull-right -0.12\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title Ferrari Paris\n            td.operation-amount\n              span.pull-right -490550.00\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title CB Apple\n            td.operation-amount\n              span.pull-right - 1899.00\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title CB Intermarché\n            td.operation-amount\n              span.pull-right -1.23\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title CB Intermarché\n            td.operation-amount\n              span.pull-right -25.39\n          tr\n            td.operation-date 17/07/2013\n            td.operation-title CB Intermarché\n            td.operation-amount\n              span.pull-right -0.12\n\n  #add-bank-window.modal\n    .modal-dialog\n      .modal-content\n        .modal-header\n          button.close(type='button', data-dismiss='modal', aria-hidden='true') x\n          h4.modal-title Add a new bank\n        .modal-body\n          form\n            fieldset\n              legend Bank\n              .form-group\n                select.form-control\n                  option Le Crédit Lyonnais\n                  option Société Générale\n            fieldset\n              legend Credentials\n              .form-group\n                label(for='inputLogin') Login\n                input#inputLogin.form-control(type='text', placeholder='enter login')\n              .form-group\n                label(for='inputPass') Password\n                input#inputPass.form-control(type='password', placeholder='enter password')\n          h3.important-notice Security notice\n          p\n            | In order to protect our customers, we implemented the best solutions.\n          p\n            | We are great, because ...\n        .modal-footer\n          a.btn.btn-link(data-dismiss='modal',href='#') cancel\n          a.btn.btn-success(href='#') Verify & Save\n\n  //.row#foot\n    .col-lg-12\n      p.text-muted\n        | Click here to read about \n        a(href='#') our highest security standards\n      p.text-muted.pull-right\n        a(href='http://cozycloud.cc') CozyCloud.cc \n        | - the cloud you own.",".container\n  button.navbar-toggle(type='button', data-toggle='collapse', data-target='.nav-collapse')\n    span.icon-bar\n    span.icon-bar\n    span.icon-bar\n  span.navbar-brand Cozy PFM\n  .nav-collapse.collapse\n    ul.nav.navbar-nav\n      li.menu-position.active\n        a#menu-pos-balance(href='#') #{window.i18n(\"menu_balance\")}\n      li.menu-position\n        a#menu-pos-accounts(href='#accounts') #{window.i18n(\"menu_accounts\")}\n      li\n        a#menu-pos-new-bank(data-toggle='modal', href='#add-bank-window') #{window.i18n(\"menu_add_bank\")}\n\n    ul.nav.navbar-nav.pull-right\n      p.navbar-text\n        | #{window.i18n(\"overall_balance\")} \n        span#total-amount 0,00\n",".modal-dialog\n  .modal-content\n    .modal-header\n      button.close(type='button', data-dismiss='modal', aria-hidden='true') x\n      h4.modal-title\n        | #{window.i18n(\"menu_add_bank\")}\n    .modal-body\n      form\n        fieldset\n          legend\n            | #{window.i18n(\"add_bank_bank\")}\n          .form-group\n            select#inputBank.form-control\n              each bank in banks\n                option(value=bank.get(\"id\"))\n                  =bank.get(\"name\")\n        fieldset\n          legend\n            | #{window.i18n(\"add_bank_credentials\")}\n          .form-group\n            label(for='inputLogin')\n              | #{window.i18n(\"add_bank_login\")}\n            input#inputLogin.form-control(type='text', placeholder=window.i18n(\"add_bank_login_placeholder\"))\n          .form-group\n            label(for='inputPass')\n              | #{window.i18n(\"add_bank_password\")}\n            input#inputPass.form-control(type='password', placeholder=window.i18n(\"add_bank_password_placeholder\"))\n      h3.important-notice \n        | #{window.i18n(\"add_bank_security_notice\")}\n      p \n        | #{window.i18n(\"add_bank_security_notice_text\")}\n    .modal-footer\n      a.btn.btn-link(data-dismiss='modal',href='#') #{window.i18n(\"add_bank_cancel\")}\n      a#btn-add-bank-save.btn.btn-success(href='#') #{window.i18n(\"add_bank_ok\")}\n"]}